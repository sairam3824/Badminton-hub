@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply border-gray-200;
    -webkit-tap-highlight-color: transparent;
  }

  body {
    @apply bg-gray-50 text-gray-900 antialiased;
    -webkit-font-smoothing: antialiased;
    /* Prevent overscroll on iOS */
    overscroll-behavior: none;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-semibold tracking-tight;
  }

  /* Prevent text selection on interactive elements */
  button, a {
    -webkit-user-select: none;
    user-select: none;
    /* Enable fast tap response on iOS */
    touch-action: manipulation;
  }

  /* Ensure all inputs have proper touch targets on mobile */
  input, select, textarea {
    font-size: 16px; /* Prevents iOS auto-zoom */
  }
}

@layer components {
  /* ── Cards ── */
  .card {
    @apply bg-white rounded-2xl border border-gray-100 shadow-sm;
  }

  .card-hover {
    @apply bg-white rounded-2xl border border-gray-100 shadow-sm hover:shadow-md hover:border-primary-200 hover:-translate-y-0.5 transition-all duration-200;
  }

  .card-glass {
    @apply bg-white/70 backdrop-blur-md rounded-2xl border border-white/60 shadow-md;
  }

  /* ── Buttons ── */
  .btn-primary {
    @apply inline-flex items-center justify-center gap-2 px-4 py-2.5 bg-primary-600 text-white text-sm font-semibold rounded-xl hover:bg-primary-700 active:bg-primary-800 transition-all duration-150 shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:shadow-sm;
    min-height: 44px; /* WCAG touch target */
    touch-action: manipulation;
  }

  .btn-secondary {
    @apply inline-flex items-center justify-center gap-2 px-4 py-2.5 bg-white text-gray-700 text-sm font-semibold rounded-xl border border-gray-200 hover:bg-gray-50 hover:border-gray-300 active:bg-gray-100 transition-all duration-150 disabled:opacity-50 disabled:cursor-not-allowed;
    min-height: 44px;
    touch-action: manipulation;
  }

  .btn-danger {
    @apply inline-flex items-center justify-center gap-2 px-4 py-2.5 bg-red-600 text-white text-sm font-semibold rounded-xl hover:bg-red-700 active:bg-red-800 transition-all duration-150 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed;
    min-height: 44px;
    touch-action: manipulation;
  }

  .btn-ghost {
    @apply inline-flex items-center justify-center gap-2 px-3 py-2.5 text-gray-500 text-sm font-medium rounded-xl hover:bg-gray-100 hover:text-gray-700 active:bg-gray-200 transition-all duration-150;
    min-height: 44px;
    touch-action: manipulation;
  }

  /* ── Form ── */
  .input {
    @apply w-full px-3.5 py-3 text-sm text-gray-900 bg-white border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500/30 focus:border-primary-400 placeholder-gray-400 transition-all duration-150;
    min-height: 44px;
  }

  .label {
    @apply block text-xs font-semibold text-gray-600 mb-1.5 uppercase tracking-wide;
  }

  /* ── Badges ── */
  .badge-green {
    @apply inline-flex items-center gap-1 px-2.5 py-0.5 text-xs font-semibold bg-primary-100 text-primary-700 rounded-full;
  }

  .badge-blue {
    @apply inline-flex items-center gap-1 px-2.5 py-0.5 text-xs font-semibold bg-blue-100 text-blue-700 rounded-full;
  }

  .badge-yellow {
    @apply inline-flex items-center gap-1 px-2.5 py-0.5 text-xs font-semibold bg-amber-100 text-amber-700 rounded-full;
  }

  .badge-red {
    @apply inline-flex items-center gap-1 px-2.5 py-0.5 text-xs font-semibold bg-red-100 text-red-700 rounded-full;
  }

  .badge-gray {
    @apply inline-flex items-center gap-1 px-2.5 py-0.5 text-xs font-semibold bg-gray-100 text-gray-600 rounded-full;
  }

  /* ── Nav ── */
  .nav-link {
    @apply flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-gray-500 hover:bg-gray-100 hover:text-gray-900 transition-all duration-150;
    min-height: 44px;
  }

  .nav-link-active {
    @apply flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-semibold bg-primary-600 text-white shadow-sm;
    min-height: 44px;
  }

  /* ── Stat card gradients ── */
  .stat-blue   { @apply bg-gradient-to-br from-blue-500 to-blue-600; }
  .stat-green  { @apply bg-gradient-to-br from-primary-500 to-primary-600; }
  .stat-purple { @apply bg-gradient-to-br from-violet-500 to-violet-600; }
  .stat-amber  { @apply bg-gradient-to-br from-amber-400 to-orange-500; }

  /* ── Score button — large courtside touch target ── */
  .score-btn-minus {
    @apply rounded-full bg-white border-2 border-gray-200 hover:border-gray-300 flex items-center justify-center active:scale-95 transition-all;
    width: 52px;
    height: 52px;
    min-width: 52px;
    touch-action: manipulation;
  }

  .score-btn-plus {
    @apply rounded-full bg-primary-600 text-white hover:bg-primary-700 flex items-center justify-center active:scale-95 transition-all shadow-sm;
    width: 52px;
    height: 52px;
    min-width: 52px;
    touch-action: manipulation;
  }

  /* ── Toast notifications ── */
  .toast-container {
    @apply fixed bottom-0 left-0 right-0 z-50 flex flex-col gap-2 p-4 pointer-events-none;
    bottom: max(5.5rem, calc(env(safe-area-inset-bottom, 0px) + 5.5rem));
  }

  @media (min-width: 1024px) {
    .toast-container {
      @apply left-auto right-4 bottom-4 max-w-sm;
      bottom: 1rem;
    }
  }

  .toast {
    @apply pointer-events-auto flex items-center gap-3 px-4 py-3 rounded-xl shadow-lg text-sm font-medium border;
    animation: toast-in 0.2s ease-out;
  }

  .toast-success { @apply bg-white border-primary-200 text-primary-800; }
  .toast-error   { @apply bg-white border-red-200 text-red-800; }
  .toast-info    { @apply bg-white border-blue-200 text-blue-800; }
}

/* ── Scrollbar ── */
::-webkit-scrollbar { width: 5px; height: 5px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: #d1d5db; border-radius: 99px; }
::-webkit-scrollbar-thumb:hover { background: #9ca3af; }

/* ── Score animation ── */
@keyframes pop {
  0%   { transform: scale(1); }
  50%  { transform: scale(1.18); }
  100% { transform: scale(1); }
}
.score-pop { animation: pop 0.18s ease-out; }

/* ── Toast animation ── */
@keyframes toast-in {
  from { opacity: 0; transform: translateY(8px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* ── Gradient hero ── */
.hero-gradient {
  background: linear-gradient(135deg, #15803d 0%, #16a34a 40%, #22c55e 100%);
}

/* ── Glass sidebar ── */
.sidebar-bg {
  background: linear-gradient(180deg, #ffffff 0%, #f9fafb 100%);
}

/* ── Mobile nav island — safe area aware ── */
.mobile-nav-island {
  bottom: max(0.75rem, env(safe-area-inset-bottom, 0.75rem));
}

/* ── Touch active feedback ── */
@media (hover: none) {
  .card-hover:active {
    transform: scale(0.98);
    box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1);
  }

  .score-btn-minus:active {
    background-color: #f3f4f6;
    transform: scale(0.92);
  }

  .score-btn-plus:active {
    background-color: #15803d;
    transform: scale(0.92);
  }
}

/* ── Smooth scrolling ── */
@media (prefers-reduced-motion: no-preference) {
  html { scroll-behavior: smooth; }
}

/* ── Focus styles for accessibility ── */
:focus-visible {
  outline: 2px solid #16a34a;
  outline-offset: 2px;
  border-radius: 4px;
}
